<div class="container my-5">

    <h2 class="text-center mb-4">üåü WELCOME TO NEW TASTE KITCHEN </h2>
    <div id="reviewCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner text-center">
            <div class="carousel-item active">
                <div class="review-card bg-white">
                    <p class="fst-italic">"Bienvenue"</p>
                    <h6 class="text-success">- French</h6>
                </div>
            </div>
            <div class="carousel-item">
                <div class="review-card bg-white">
                    <p class="fst-italic">" Bienvenido / Bienvenida!"</p>
                    <h6 class="text-success">- Spanish</h6>
                </div>
            </div>
            <div class="carousel-item">
                <div class="review-card bg-white">
                    <p class="fst-italic">"ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ / Khush Aamdeed</p>
                    <h6 class="text-success">- Urdu</h6>
                </div>
            </div>
            <div class="carousel-item">
                <div class="review-card bg-white">
                    <p class="fst-italic">" Nn·ªç·ªç"</p>
                    <h6 class="text-success">- Igbo</h6>
                </div>
            </div>
            <div class="carousel-item">
                <div class="review-card bg-white">
                    <p class="fst-italic">" ·∫∏ k√°ab·ªç"</p>
                    <h6 class="text-success">- Yoruba</h6>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#reviewCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#reviewCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</div>

<!-- Food Items and Discount Section -->
<div class="container my-5">
    <h2 class="text-center mb-4 fw-bold">üçΩÔ∏è Enjoy Our Special Delicacies & Discount!</h2>

    <div class="row g-4 justify-content-center">
        <div class="col-md-4">
            <div class="card shadow-lg h-100 d-flex flex-column justify-content-between border-0 rounded-lg" style="min-height: 380px;">
                <img src="../img/veg-fried-rice.jpg" class="card-img-top img-fluid" alt="Fried Rice" 
                    style="height: 160px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">Fried Rice</h5>
                    <p class="text-muted">Delicious vegetable fried rice with a touch of spice.</p>
                    <p class="fw-bold text-success">Price: ¬£6.49</p>
                </div>
                <div class="card-footer bg-white border-0 text-center">
                <a href="orderredirect.php" class="btn btn-outline-success btn-sm">
                <i class="bi bi-cart-plus"></i> Order on just eat</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-lg h-100 d-flex flex-column justify-content-between border-0 bg-light rounded-lg" style="min-height: 380px;">
                <img src="../img/20 discount.jpg" class="card-img-top img-fluid" alt="20% Off" 
                    style="height: 160px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold text-success">üéâ Get 20% Off!</h5>
                    <p class="text-muted">Spend ¬£30 or more and enjoy a 20% discount on your order.</p>
                    <div class="badge bg-success text-white position-absolute top-0 start-50 translate-middle mt-2 p-2 rounded-pill">
                        Limited Time Only!
                    </div>
                </div>
                <div class="card-footer bg-white border-0 text-center">
                    <a href="orderredirect.php" class="btn btn-success btn-sm"><i class="bi bi-tag"></i> Claim Discount</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-lg h-100 d-flex flex-column justify-content-between border-0 rounded-lg" style="min-height: 380px;">
                <img src="../img/Peppered Turkey.jpg" class="card-img-top img-fluid" alt="Spicy Turkey Wings" 
                    style="height: 160px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
                <div class="card-body text-center">
                    <h5 class="card-title fw-bold">Peppered Turkey</h5>
                    <p class="text-muted">Savory turkey wings tossed in spicy pepper sauce.</p>
                    <p class="fw-bold text-success">Price: ¬£9.50</p>
                </div>
                <div class="card-footer bg-white border-0 text-center">
                    <a href="orderredirect.php" class="btn btn-outline-success btn-sm">
                        <i class="bi bi-cart-plus"></i> Order on just eat</a>
                </div>
            </div>
        </div>
    </div>
</div>



        
        <div class="container my-5">
    <h2 class="text-center mb-4 fw-bold">üé• Our Featured TikTok Videos</h2>

    <div class="row justify-content-center">
        <div class="col-md-4 mb-4">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@newtaste.kitchen/video/7453965558430633249" 
                data-video-id="7453965558430633249" 
                style="max-width: 100%; min-width: 300px;">
                <section></section>
            </blockquote>
        </div>

        <div class="col-md-4 mb-4">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@newtaste.kitchen/video/7453240533054426400"
                data-video-id="7453240533054426400" 
                style="max-width: 100%; min-width: 300px;">
                <section></section>
            </blockquote>
        </div>

        <div class="col-md-4 mb-4">
            <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@newtaste.kitchen/video/7454344870484823328" 
                data-video-id="7454344870484823328" 
                style="max-width: 100%; min-width: 300px;">
                <section></section>
            </blockquote>
        </div>
    </div>

    <!-- TikTok JS Script -->
    <script async src="https://www.tiktok.com/embed.js"></script>
</div>


<!-- Google Maps Section with Geolocation -->
<div class="container my-5">
    <h2 class="text-center mb-4 fw-bold">üìç Find Us or Locate Yourself</h2>


 <div class="map-container rounded shadow-lg overflow-hidden mb-4" 
     style="border: 5px solid #28a745; transition: transform 0.3s ease-in-out;">
    <iframe 
        id="defaultMap"
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2424.185697767316!2d-1.9805882746366457!3d52.584335781465995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4870a20de725b111%3A0x15791d041368949a!2sBridge%20St%2C%20Walsall%20WS1%201JZ!5e0!3m2!1sen!2suk!4v1743173371256!5m2!1sen!2suk"
        width="100%"
        height="400"
        style="border: 0; display: block;"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade">
    </iframe>
</div>
          
            <div id="userLocationMap" class="map-container rounded shadow-lg overflow-hidden" 
                 style="border: 5px solidrgb(10, 95, 37); transition: transform 0.3s ease-in-out; display: none;">
            </div>

            
            <div class="text-center mt-3">
                <button onclick="getUserLocation()" class="btn btn-success fw-bold">
                    üìç Locate Me
                </button>
            </div>
        </div>
    </div>
</div>


<script>
    
    function getUserLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showUserPosition, showError);
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }

    
    function showUserPosition(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;

        
        document.getElementById('defaultMap').style.display = 'none';
        document.getElementById('userLocationMap').style.display = 'block';

        
        var mapUrl = `https://www.google.com/maps?q=${latitude},${longitude}&output=embed`;
        document.getElementById('userLocationMap').innerHTML = `<iframe width="100%" height="400" src="${mapUrl}" allowfullscreen></iframe>`;
    }

    
    function showError(error) {
        switch (error.code) {
            case error.PERMISSION_DENIED:
                alert("‚ùå User denied the request for Geolocation.");
                break;
            case error.POSITION_UNAVAILABLE:
                alert("‚ùóÔ∏è Location information is unavailable.");
                break;
            case error.TIMEOUT:
                alert("‚è±Ô∏è The request to get user location timed out.");
                break;
            case error.UNKNOWN_ERROR:
                alert("‚ö†Ô∏è An unknown error occurred.");
                break;
        }
    }
</script>

<!-- Customer Reviews Section -->
<div class="container my-5">
    <h2 class="text-center mb-4">üåü Customer Reviews</h2>

    <!-- Reviews Container to Dynamically Load Content -->
    <div id="reviewCarousel" class="carousel slide" data-bs-ride="carousel">
        <div id="review-container" class="carousel-inner text-center">
            <!-- Dynamic Reviews Will Load Here -->
        </div>
    </div>
</div>

<!-- AJAX Script to Fetch Reviews Dynamically -->
<script>
    // Fetch reviews dynamically using AJAX
    function fetchReviews() {
        fetch('<?= base_url('review/getReviews') ?>') // Call the CI4 route
            .then(response => response.json()) // Parse the JSON response
            .then(data => {
                let reviewHTML = '';
                data.forEach((review, index) => {
                    let activeClass = index === 0 ? 'active' : ''; // Make first item active
                    reviewHTML += `
                        <div class="carousel-item ${activeClass}">
                            <div class="review-card bg-white p-3 shadow rounded">
                                <p class="fst-italic">"${review.review}"</p>
                                <h6 class="text-muted">${review.name} - Reviewed on: ${new Date(review.created_at).toLocaleDateString()}</h6>
                            </div>
                        </div>
                    `;
                });

                // Add all the reviews into the container
                document.getElementById('review-container').innerHTML = reviewHTML;
            })
            .catch(error => console.error('Error fetching reviews:', error));
    }

    // Load reviews on page load
    document.addEventListener('DOMContentLoaded', fetchReviews);
</script>

<!-- Review botton -->
<div class="text-center mt-4">
        <a href="review.php" class="btn btn-outline-success">
            <i class="bi bi-arrow-left"></i> Leave your Review
        </a>
    </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#reviewCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#reviewCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</div>

    <div class="row mt-4 text-center">
        <div class="col-md-4">
            <div class="p-3 border rounded shadow-sm bg-light">
                <h5 class="text-success"><i class="bi bi-telephone"></i> Call Us</h5>
                <p class="mb-0">+44 1234 567 890</p>
            </div>
        </div>
        <div class="col-md-4 mt-3 mt-md-0">
            <div class="p-3 border rounded shadow-sm bg-light">
                <h5 class="text-success"><i class="bi bi-envelope"></i> Email Us</h5>
                <p class="mb-0">info@newtastekitchen.com</p>
            </div>
        </div>
        <div class="col-md-4 mt-3 mt-md-0">
            <div class="p-3 border rounded shadow-sm bg-light">
                <h5 class="text-success"><i class="bi bi-geo-alt"></i> Visit Us</h5>

                <p class="mb-0">123 Preston Road, Walsall, UK</p>

            </div>
        </div>
    </div>
</div>
